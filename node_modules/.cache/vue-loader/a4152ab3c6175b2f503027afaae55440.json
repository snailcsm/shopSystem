{"remainingRequest":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\src\\views\\rights\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\src\\views\\rights\\Roles.vue","mtime":1637043641573},{"path":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1635841480656},{"path":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\node_modules\\babel-loader\\lib\\index.js","mtime":1635841477678},{"path":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1635841480656},{"path":"F:\\学习资料\\vue\\电商系统\\wwwroot\\shop\\node_modules\\vue-loader\\lib\\index.js","mtime":1635841509972}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUm9sZXMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByb2xlRGF0YTogW10sCiAgICAgIHNlcnZlckRhdGE6IFtdLAogICAgICByaWdodERhdGE6IFtdLAogICAgICBmUjogW10sLy/lrZjmlL7miYDmnInkuIDnuqfmnYPpmZAKICAgICAgc1I6IFtdLC8v5a2Y5pS+5omA5pyJ5LqM57qn5p2D6ZmQCiAgICAgIHRSOiBbXSwvL+WtmOaUvuaJgOacieS4iee6p+adg+mZkAogICAgICBmaXJzdFI6IFtdLC8v5a2Y5pS+5b2T5YmN55So5oi355qE5LiA57qn5p2D6ZmQCiAgICAgIHNlY29uZFI6IFtdLAogICAgICB0aGlyZFI6IFtdLAogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgZm9ybUxhYmVsV2lkdGg6ICcyMDBweCcsCiAgICAgIGFkZFJvbGVEaWFsb2c6IGZhbHNlLAogICAgICBuZXdSb2xlOiB7CiAgICAgICAgcm9sZXJUaXRsZTogJycsCiAgICAgICAgaXRybzogJycKICAgICAgfSwKICAgICAgZWRpdFJvbGVEaWFsb2c6IGZhbHNlLAogICAgICBlZGl0Um9sZURhdGE6IHsKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICByb2xlclRpdGxlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgaXRybzogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuS7i+e7jScsIHRyaWdnZXI6ICdibHVyJ31dCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJvbGVEYXRhKCk7CiAgICB0aGlzLmdldFJpZ2h0RGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/lj5HpgIHnvZHnu5zor7fmsYLojrflj5bop5LoibLmlbDmja4KICAgIGdldFJvbGVEYXRhKCkgewogICAgICB0aGlzLiRodHRwLmdldCgnL3JvbGUnKS50aGVuKChyZXMgPT4gewogICAgICAgIC8vY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgIHRoaXMucm9sZURhdGEgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnNlcnZlckRhdGEgPSByZXMuZGF0YTsKICAgICAgfSkpCiAgICB9LAogICAgLy/lj5HpgIHnvZHnu5zor7fmsYLojrflj5bmnYPpmZDmlbDmja4KICAgIGdldFJpZ2h0RGF0YSgpIHsKICAgICAgdGhpcy4kaHR0cC5nZXQoJy9yaWdodHMnKS50aGVuKChyZXMgPT4gewogICAgICAgIHRoaXMucmlnaHREYXRhID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5mUiA9IHRoaXMucmlnaHREYXRhLmZpbHRlcihyID0+IHsKICAgICAgICAgIHJldHVybiByLmxldmFsID09PSAxCiAgICAgICAgfSkKICAgICAgICB0aGlzLnNSID0gdGhpcy5yaWdodERhdGEuZmlsdGVyKHIgPT4gewogICAgICAgICAgcmV0dXJuIHIubGV2YWwgPT09IDIKICAgICAgICB9KQogICAgICAgIHRoaXMudFIgPSB0aGlzLnJpZ2h0RGF0YS5maWx0ZXIociA9PiB7CiAgICAgICAgICByZXR1cm4gci5sZXZhbCA9PT0gMwogICAgICAgIH0pOwogICAgICB9KSkKICAgIH0sCiAgICBnZXRVc2VyUmlnaHQocm93KSB7CiAgICAgIHRoaXMuZmlyc3RSID0gW107CiAgICAgIHRoaXMuc2Vjb25kUiA9IFtdOwogICAgICB0aGlzLnRoaXJkUiA9IFtdOwogICAgICBjb25zdCByaWdodEFycnkgPSByb3cucmlnaHRzLnNwbGl0KCcsJyk7CiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaWdodEFycnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMudFIuZmlsdGVyKHIgPT4gewogICAgICAgICAgICBpZiAoci5pZCA9PT0gcmlnaHRBcnJ5W2ldKSB7CiAgICAgICAgICAgICAgdGhpcy50aGlyZFIucHVzaChyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICA7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy50aGlyZFIubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgdGhpcy5zUi5maWx0ZXIocjIgPT4gewogICAgICAgICAgICAgIGlmIChyMi5pZCA9PSB0aGlzLnRoaXJkUltqXS5waWQpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlY29uZFIuaW5kZXhPZihyMikgPCAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kUi5wdXNoKHIyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICA7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5zZWNvbmRSLmxlbmd0aDsgbisrKSB7CiAgICAgICAgICAgICAgdGhpcy5mUi5maWx0ZXIocjMgPT4gewogICAgICAgICAgICAgICAgaWYgKHIzLmlkID09IHRoaXMuc2Vjb25kUltuXS5waWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RSLmluZGV4T2YocjMpIDwgMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSLnB1c2gocjMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQoKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvL3RhZ+eCueWHu+WIoOmZpAogICAgcmVtb3ZlUmlnaHQocm9sZU9iaiwgcmlnaHRPYmopIHsKICAgICAgLy/mm7TmlrDmr4/kuIDkuKrnuqfliKvnmoTmnYPpmZAKICAgICAgaWYgKHJpZ2h0T2JqLmxldmFsID09IDMpIHsKICAgICAgICB0aGlzLnRoaXJkUiA9IHRoaXMudGhpcmRSLmZpbHRlcihyID0+IHsKICAgICAgICAgIHJldHVybiByLmlkICE9PSByaWdodE9iai5pZDsKICAgICAgICAgIHJvbGVPYmoucmlnaHRzID0gdGhpcy5kZWxldGVSaWdodChyb2xlT2JqLCByaWdodE9iai5pZCk7CiAgICAgICAgfSk7CgogICAgICAgIC8v5aaC5p6c5a2Q5p2D6ZmQ5Yig6Zmk5a6M5LqG77yM5a+55bqU55qE54i25p2D6ZmQ5Lmf5Yig6ZmkCiAgICAgICAgbGV0IHJlc3VsdE9iaiA9IHRoaXMuY291bnRSZW1haW4odGhpcy50aGlyZFIsIHJpZ2h0T2JqLnBpZCwgdGhpcy5zZWNvbmRSKTsvL+WIoOmZpOS6jOe6p+adg+mZkAogICAgICAgIHRoaXMuc2Vjb25kUiA9IHJlc3VsdE9iai5wcmV2UmlnaHQ7CiAgICAgICAgbGV0IHJlc3VsdE9iajIgPSB0aGlzLmNvdW50UmVtYWluKHRoaXMuc2Vjb25kUiwgcmVzdWx0T2JqLm5leHRQaWQsIHRoaXMuZmlyc3RSKTsvL+WIoOmZpOS4gOe6p+adg+mZkAogICAgICAgIHRoaXMuZmlyc3RSID0gcmVzdWx0T2JqMi5wcmV2UmlnaHQ7CgogICAgICB9CiAgICAgIGlmIChyaWdodE9iai5sZXZhbCA9PSAyKSB7CiAgICAgICAgdGhpcy5zZWNvbmRSID0gdGhpcy5zZWNvbmRSLmZpbHRlcihyID0+IHsKICAgICAgICAgIHJldHVybiByLmlkICE9PSByaWdodE9iai5pZDsKICAgICAgICAgIHRoaXMudGhpcmRSID0gdGhpcy50aGlyZFIuZmlsdGVyKHIzID0+IHsKICAgICAgICAgICAgcmV0dXJuIHIzLnBpZCAhPT0gcjIuaWQ7CiAgICAgICAgICAgIHJvbGVPYmoucmlnaHRzID0gdGhpcy5kZWxldGVSaWdodChyb2xlT2JqLCByMy5pZCk7CgogICAgICAgICAgfSkKCiAgICAgICAgfSk7CiAgICAgICAgbGV0IHJlc3VsdE9iajMgPSB0aGlzLmNvdW50UmVtYWluKHRoaXMuc2Vjb25kUiwgcmlnaHRPYmoucGlkLCB0aGlzLmZpcnN0Uik7Ly/liKDpmaTkuIDnuqfmnYPpmZAKICAgICAgICB0aGlzLmZpcnN0UiA9IHJlc3VsdE9iajMucHJldlJpZ2h0OwogICAgICB9CiAgICAgIGlmIChyaWdodE9iai5sZXZhbCA9PSAxKSB7CiAgICAgICAgdGhpcy5maXJzdFIgPSB0aGlzLmZpcnN0Ui5maWx0ZXIociA9PiB7CiAgICAgICAgICBpZiAoci5pZCA9PSByaWdodE9iai5pZCkgewogICAgICAgICAgICB0aGlzLnNlY29uZFIgPSB0aGlzLnNlY29uZFIuZmlsdGVyKHIyID0+IHsKICAgICAgICAgICAgICBpZiAocjIucGlkID09IHIuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMudGhpcmRSID0gdGhpcy50aGlyZFIuZmlsdGVyKHIzID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHIzLnBpZCA9PSByMi5pZCkgewogICAgICAgICAgICAgICAgICAgIHJvbGVPYmoucmlnaHRzID0gdGhpcy5kZWxldGVSaWdodChyb2xlT2JqLCByMy5pZCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHIzLnBpZCAhPT0gcjIuaWQ7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gcjIucGlkICE9PSByLmlkOwogICAgICAgICAgICB9KQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByLmlkICE9PSByaWdodE9iai5pZDsKICAgICAgICB9KQogICAgICB9CgogICAgfSwKICAgIC8v5pu05paw55So5oi355qE5p2D6ZmQCiAgICBkZWxldGVSaWdodChyb2xlT2JqLCByaWQpIHsKICAgICAgLy8gY29uc29sZS5sb2cocm9sZU9iaikKICAgICAgbGV0IHN0ciA9IHJpZCArICIsIjsKICAgICAgbGV0IHNzcyA9ICIiOwogICAgICAvLyAgY29uc29sZS5sb2coInN0ciIrc3RyKyItLS1yaWQiK3JpZCkKICAgICAgaWYgKHJvbGVPYmoucmlnaHRzLmluZGV4T2Yoc3RyKSA+IC0xKSB7CiAgICAgICAgc3NzID0gcm9sZU9iai5yaWdodHMucmVwbGFjZShzdHIsICIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzc3MgPSByb2xlT2JqLnJpZ2h0cy5yZXBsYWNlKCIsIiArIHJpZCwgIiIpOwogICAgICB9CiAgICAgIC8vICBjb25zb2xlLmxvZyhzc3MpCiAgICAgIHJldHVybiBzc3M7CiAgICB9LAogICAgLy/lrZDmnYPpmZDliKDpmaTlkI7oh6rliqjliKDpmaTniLbmnYPpmZAKICAgIGNvdW50UmVtYWluKHJpZ2h0QXJyeSwgcGlkLCBwcmV2UmlnaHQpIHsKICAgICAgbGV0IGNvdW50ID0gcmlnaHRBcnJ5LnJlZHVjZSgocHJlLCBjdXIpID0+IHsKICAgICAgICBpZiAoY3VyLnBpZCA9PSBwaWQpIHsKICAgICAgICAgIHByZSsrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcHJlOwogICAgICB9LCAwKTsKCiAgICAgIGxldCBuZXh0UGlkID0gLTE7CiAgICAgIGlmIChjb3VudCA9PSAwKSB7CiAgICAgICAgcHJldlJpZ2h0ID0gcHJldlJpZ2h0LmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgIGlmIChpdGVtLmlkID09IHBpZCkgewogICAgICAgICAgICBuZXh0UGlkID0gaXRlbS5waWQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaXRlbS5pZCAhPSBwaWQ7CiAgICAgICAgfSkKCiAgICAgICAgLy8gY29uc29sZS5sb2cocHJldlJpZ2h0KQogICAgICB9CiAgICAgIHJldHVybiB7bmV4dFBpZCwgcHJldlJpZ2h0fTsKICAgIH0sCgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8v5Yig6Zmk6KeS6ImyCiAgICBkZWxldGVSb2woaWQpIHsKICAgICAgdGhpcy5yb2xlRGF0YSA9IHRoaXMucm9sZURhdGEuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLmlkICE9PSBpZDsKICAgICAgfSkKICAgIH0sCiAgICAvL+eCueWHu+WIhumFjeadg+mZkAogICAgZGlzcGFjaFJpZ2h0KCkgewogICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+ato+WcqOW7uuiuvuS4rScpCiAgICB9LAogICAgLy/ngrnlh7vmt7vliqDop5LoibIKICAgIHRvQWRkUm9sZSgpIHsKCiAgICAgIHRoaXMuYWRkUm9sZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgY2xvc2VBZGQoKSB7CiAgICAgIHRoaXMuYWRkUm9sZURpYWxvZyA9IGZhbHNlOwoKICAgIH0sCiAgICBhZGRSb2xlKCkgewogICAgICB0aGlzLiRyZWZzLmFkZFJvbGVSZWYudmFsaWRhdGUoKHZhbHVlLCBvYmopID0+IHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIHRoaXMucm9sZURhdGEudW5zaGlmdChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubmV3Um9sZSkpKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5re75Yqg5oiQ5YqfIik7CiAgICAgICAgICB0aGlzLmFkZFJvbGVEaWFsb2cgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3Iob2JqW09iamVjdC5rZXlzKG9iailbMF1dWzBdLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBjbGVhckluZm8oKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkUm9sZVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIHRvRWRpdFJvbGUodmFsdWUpIHsKICAgICAgdGhpcy5lZGl0Um9sZURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICAgIHRoaXMuZWRpdFJvbGVEaWFsb2cgPSB0cnVlOwoKICAgIH0sCiAgICBjbG9zZUVkaXQoKSB7CiAgICAgIHRoaXMuZWRpdFJvbGVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICBlZGl0Um9sZSgpIHsKCiAgICAgIHRoaXMuJHJlZnMuZWRpdFJvbGVSZWYudmFsaWRhdGUoKHZhbHVlLCBvYmopID0+IHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5yb2xlRGF0YS5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgaWYoaXRlbS5pZD09IHRoaXMuZWRpdFJvbGVEYXRhLmlkKXsKICAgICAgICAgICAgICBpdGVtLml0cm89dGhpcy5lZGl0Um9sZURhdGEuaXRybzsKICAgICAgICAgICAgICBpdGVtLnJvbGVyVGl0bGU9dGhpcy5lZGl0Um9sZURhdGEucm9sZXJUaXRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5Yqf77yBJyt0aGlzLmVkaXRSb2xlRGF0YS5pdHJvKTsKICAgICAgICAgIH0pCiAgICAgICB0aGlzLmVkaXRSb2xlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKG9ialtPYmplY3Qua2V5cyhvYmopWzBdXVswXS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgY2xlYXJTZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZWRpdFJvbGVSZWYucmVzZXRGaWVsZHMoKTsKICAgIH0KCgogIH0KfQoK"},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"Roles.vue","sourceRoot":"src/views/rights","sourcesContent":["<template>\r\n  <div class=\"roles\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item :to=\"{ path: '/rights' }\">权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div class=\"page-contain\">\r\n      <!--添加角色按钮-->\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"toAddRole\">添加角色</el-button>\r\n\r\n      <!--角色列表-->\r\n      <el-table :data=\"roleData\" style=\"width: 100%\" border @expand-change=\"getUserRight\">\r\n        <!--展开列-->\r\n        <el-table-column width=\"55\" type=\"expand\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row class=\"tb-bottom\" :id=\"scope.row.id\" v-for=\"tag in firstR\" :key=\"tag.id\">\r\n              <el-col :span=\"3\">\r\n                <el-tag class=\"right-tag\" closable @close=\"removeRight(scope.row,tag)\">{{tag.authName}}</el-tag>\r\n              </el-col>\r\n              <el-col :span=\"21\">\r\n                <el-row class=\"tb-bottom\" v-for=\"tag2 in secondR.filter(p=>p.pid==tag.id)\" :key=\"tag2.id\">\r\n                  <el-col class=\"tb-left\" :span=\"3\">\r\n                    <el-tag class=\"right-tag\" closable type=\"danger\" @close=\"removeRight(scope.row,tag2)\">\r\n                      {{tag2.authName}}\r\n                    </el-tag>\r\n                  </el-col>\r\n                  <el-col class=\"tb-left\" :span=\"18\">\r\n                    <el-tag class=\"right-tag\" v-for=\"tag3 in thirdR.filter(p=>p.pid==tag2.id)\" :key=\"tag3.id\"\r\n                            type=\"warning\" closable @close=\"removeRight(scope.row,tag3)\">{{tag3.authName}}\r\n                    </el-tag>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column width=\"80\" type=\"index\" label=\"序号\"></el-table-column>\r\n        <el-table-column label=\"角色名称\" prop=\"rolerTitle\" width=\"300\"></el-table-column>\r\n        <el-table-column prop=\"itro\" label=\"角色简介\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"400\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"toEditRole(scope.row)\">编辑</el-button>\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"deleteRol(scope.row.id)\">删除</el-button>\r\n            <el-button type=\"warning\" icon=\"el-icon-set\" @click=\"dispachRight\">分配权限</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!--添加角色对话框-->\r\n      <el-dialog title=\"添加新角色\" :visible.sync=\"addRoleDialog\" @close=\"clearInfo\">\r\n        <el-form :model=\"newRole\" ref=\"addRoleRef\" :rules=\"rules\">\r\n          <el-form-item label=\"角色名称：\" :label-width=\"formLabelWidth\" prop=\"rolerTitle\">\r\n            <el-input v-model=\"newRole.rolerTitle\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色描述：\" :label-width=\"formLabelWidth\" prop=\"itro\">\r\n            <el-input v-model=\"newRole.itro\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"closeAdd\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!--编辑角色对话框-->\r\n      <el-dialog title=\"编辑角色\" :visible.sync=\"editRoleDialog\" @close=\"clearSet\">\r\n        <el-form :model=\"editRoleData\" ref=\"editRoleRef\" :rules=\"rules\">\r\n          <el-form-item label=\"角色名称：\" :label-width=\"formLabelWidth\" prop=\"rolerTitle\">\r\n            <el-input v-model=\"editRoleData.rolerTitle\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色描述：\" :label-width=\"formLabelWidth\" prop=\"itro\">\r\n            <el-input v-model=\"editRoleData.itro\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"closeEdit\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"editRole\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Roles\",\r\n    data() {\r\n      return {\r\n        roleData: [],\r\n        serverData: [],\r\n        rightData: [],\r\n        fR: [],//存放所有一级权限\r\n        sR: [],//存放所有二级权限\r\n        tR: [],//存放所有三级权限\r\n        firstR: [],//存放当前用户的一级权限\r\n        secondR: [],\r\n        thirdR: [],\r\n        /////////////////////\r\n        formLabelWidth: '200px',\r\n        addRoleDialog: false,\r\n        newRole: {\r\n          rolerTitle: '',\r\n          itro: ''\r\n        },\r\n        editRoleDialog: false,\r\n        editRoleData: {\r\n        },\r\n        rules: {\r\n          rolerTitle: [{required: true, message: '请输入角色名称', trigger: 'blur'}],\r\n          itro: [{required: true, message: '请输入角色介绍', trigger: 'blur'}]\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.getRoleData();\r\n      this.getRightData();\r\n    },\r\n    methods: {\r\n      //发送网络请求获取角色数据\r\n      getRoleData() {\r\n        this.$http.get('/role').then((res => {\r\n          //console.log(res.data);\r\n          this.roleData = res.data;\r\n          this.serverData = res.data;\r\n        }))\r\n      },\r\n      //发送网络请求获取权限数据\r\n      getRightData() {\r\n        this.$http.get('/rights').then((res => {\r\n          this.rightData = res.data;\r\n          this.fR = this.rightData.filter(r => {\r\n            return r.leval === 1\r\n          })\r\n          this.sR = this.rightData.filter(r => {\r\n            return r.leval === 2\r\n          })\r\n          this.tR = this.rightData.filter(r => {\r\n            return r.leval === 3\r\n          });\r\n        }))\r\n      },\r\n      getUserRight(row) {\r\n        this.firstR = [];\r\n        this.secondR = [];\r\n        this.thirdR = [];\r\n        const rightArry = row.rights.split(',');\r\n        new Promise((resolve) => {\r\n          for (let i = 0; i < rightArry.length; i++) {\r\n            this.tR.filter(r => {\r\n              if (r.id === rightArry[i]) {\r\n                this.thirdR.push(r);\r\n              }\r\n              ;\r\n            });\r\n            resolve();\r\n          }\r\n        }).then(() => {\r\n          return new Promise((resolve) => {\r\n\r\n            for (let j = 0; j < this.thirdR.length; j++) {\r\n              this.sR.filter(r2 => {\r\n                if (r2.id == this.thirdR[j].pid) {\r\n                  if (this.secondR.indexOf(r2) < 0) {\r\n                    this.secondR.push(r2);\r\n                  }\r\n                }\r\n              })\r\n            }\r\n            ;\r\n            resolve();\r\n          }).then(() => {\r\n            return new Promise(resolve => {\r\n              for (let n = 0; n < this.secondR.length; n++) {\r\n                this.fR.filter(r3 => {\r\n                  if (r3.id == this.secondR[n].pid) {\r\n                    if (this.firstR.indexOf(r3) < 0) {\r\n                      this.firstR.push(r3);\r\n                    }\r\n                  }\r\n                })\r\n              }\r\n\r\n            })\r\n          })\r\n        })\r\n      },\r\n      //tag点击删除\r\n      removeRight(roleObj, rightObj) {\r\n        //更新每一个级别的权限\r\n        if (rightObj.leval == 3) {\r\n          this.thirdR = this.thirdR.filter(r => {\r\n            return r.id !== rightObj.id;\r\n            roleObj.rights = this.deleteRight(roleObj, rightObj.id);\r\n          });\r\n\r\n          //如果子权限删除完了，对应的父权限也删除\r\n          let resultObj = this.countRemain(this.thirdR, rightObj.pid, this.secondR);//删除二级权限\r\n          this.secondR = resultObj.prevRight;\r\n          let resultObj2 = this.countRemain(this.secondR, resultObj.nextPid, this.firstR);//删除一级权限\r\n          this.firstR = resultObj2.prevRight;\r\n\r\n        }\r\n        if (rightObj.leval == 2) {\r\n          this.secondR = this.secondR.filter(r => {\r\n            return r.id !== rightObj.id;\r\n            this.thirdR = this.thirdR.filter(r3 => {\r\n              return r3.pid !== r2.id;\r\n              roleObj.rights = this.deleteRight(roleObj, r3.id);\r\n\r\n            })\r\n\r\n          });\r\n          let resultObj3 = this.countRemain(this.secondR, rightObj.pid, this.firstR);//删除一级权限\r\n          this.firstR = resultObj3.prevRight;\r\n        }\r\n        if (rightObj.leval == 1) {\r\n          this.firstR = this.firstR.filter(r => {\r\n            if (r.id == rightObj.id) {\r\n              this.secondR = this.secondR.filter(r2 => {\r\n                if (r2.pid == r.id) {\r\n                  this.thirdR = this.thirdR.filter(r3 => {\r\n                    if (r3.pid == r2.id) {\r\n                      roleObj.rights = this.deleteRight(roleObj, r3.id);\r\n                    }\r\n                    return r3.pid !== r2.id;\r\n                  })\r\n                }\r\n                return r2.pid !== r.id;\r\n              })\r\n            }\r\n\r\n            return r.id !== rightObj.id;\r\n          })\r\n        }\r\n\r\n      },\r\n      //更新用户的权限\r\n      deleteRight(roleObj, rid) {\r\n        // console.log(roleObj)\r\n        let str = rid + \",\";\r\n        let sss = \"\";\r\n        //  console.log(\"str\"+str+\"---rid\"+rid)\r\n        if (roleObj.rights.indexOf(str) > -1) {\r\n          sss = roleObj.rights.replace(str, \"\");\r\n        } else {\r\n          sss = roleObj.rights.replace(\",\" + rid, \"\");\r\n        }\r\n        //  console.log(sss)\r\n        return sss;\r\n      },\r\n      //子权限删除后自动删除父权限\r\n      countRemain(rightArry, pid, prevRight) {\r\n        let count = rightArry.reduce((pre, cur) => {\r\n          if (cur.pid == pid) {\r\n            pre++;\r\n          }\r\n          return pre;\r\n        }, 0);\r\n\r\n        let nextPid = -1;\r\n        if (count == 0) {\r\n          prevRight = prevRight.filter(item => {\r\n            if (item.id == pid) {\r\n              nextPid = item.pid;\r\n            }\r\n            return item.id != pid;\r\n          })\r\n\r\n          // console.log(prevRight)\r\n        }\r\n        return {nextPid, prevRight};\r\n      },\r\n\r\n      //////////////////////////////////////\r\n      //删除角色\r\n      deleteRol(id) {\r\n        this.roleData = this.roleData.filter(item => {\r\n          return item.id !== id;\r\n        })\r\n      },\r\n      //点击分配权限\r\n      dispachRight() {\r\n        this.$message.info('正在建设中')\r\n      },\r\n      //点击添加角色\r\n      toAddRole() {\r\n\r\n        this.addRoleDialog = true;\r\n      },\r\n      closeAdd() {\r\n        this.addRoleDialog = false;\r\n\r\n      },\r\n      addRole() {\r\n        this.$refs.addRoleRef.validate((value, obj) => {\r\n          if (value) {\r\n            this.roleData.unshift(JSON.parse(JSON.stringify(this.newRole)));\r\n            this.$message.success(\"添加成功\");\r\n            this.addRoleDialog = false;\r\n          } else {\r\n            return this.$message.error(obj[Object.keys(obj)[0]][0].message);\r\n          }\r\n        })\r\n      },\r\n      clearInfo() {\r\n        this.$refs.addRoleRef.resetFields();\r\n      },\r\n      toEditRole(value) {\r\n        this.editRoleData = JSON.parse(JSON.stringify(value));\r\n        this.editRoleDialog = true;\r\n\r\n      },\r\n      closeEdit() {\r\n        this.editRoleDialog = false;\r\n      },\r\n      editRole() {\r\n\r\n        this.$refs.editRoleRef.validate((value, obj) => {\r\n          if (value) {\r\n              this.roleData.forEach(item=>{\r\n              if(item.id== this.editRoleData.id){\r\n                item.itro=this.editRoleData.itro;\r\n                item.rolerTitle=this.editRoleData.rolerTitle;\r\n              }\r\n                this.$message.success('修改成功！'+this.editRoleData.itro);\r\n            })\r\n         this.editRoleDialog = false;\r\n          } else {\r\n            return this.$message.error(obj[Object.keys(obj)[0]][0].message);\r\n          }\r\n        })\r\n      },\r\n      clearSet() {\r\n        this.$refs.editRoleRef.resetFields();\r\n      }\r\n\r\n\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .tb-bottom {\r\n    border-bottom: 1px #8f9cad solid;\r\n  }\r\n\r\n  .tb-bottom:last-child {\r\n    border: none;\r\n  }\r\n\r\n  .tb-left {\r\n    border-left: 1px #8f9cad solid;\r\n  }\r\n\r\n  .right-tag {\r\n    margin: 5px;\r\n  }\r\n</style>\r\n"]}]}